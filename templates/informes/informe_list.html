{% extends 'base.html' %}

{% block content %}
<h1>Informes</h1>

{% if current_user.rol == "admin" or current_user.rol == "entrenador" %}
  <div style="margin-bottom: 20px;">
    <a href="{% url 'informes:create' %}" class="btn btn-primary">Crear Informe Manual</a>
    <a href="{% url 'informes:generar' %}" class="btn btn-success">Generar Informes del Mes</a>
  </div>
{% endif %}

<table class="table table-striped">
  <thead>
    <tr>
      <th>Usuario</th>
      <th>AÃ±o</th>
      <th>Mes</th>
      <th>Clases</th>
      <th>Asistidas</th>
      <th>Torneos</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for informe in informes %}
      <tr>
        <td>{{ informe.usuario }}</td>
        <td>{{ informe.anio }}</td>
        <td>{{ informe.mes }}</td>
        <td>{{ informe.clases }}</td>
        <td>{{ informe.clases_asistidas }}</td>
        <td>{{ informe.torneos_asistidos }}</td>
        <td>
          <a href="{% url 'informes:detail' informe.pk %}" class="btn btn-sm btn-info">Ver</a>
          
          {% if current_user.rol == "admin" or current_user.rol == "entrenador" %}
            <a href="{% url 'informes:update' informe.pk %}" class="btn btn-sm btn-warning">Editar</a>
            <a href="{% url 'informes:delete' informe.pk %}" class="btn btn-sm btn-danger">Eliminar</a>
          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="7">No hay informes disponibles.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
